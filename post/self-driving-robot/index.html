<!DOCTYPE html>
<html lang="en-us">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YZ04D85XM2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-YZ04D85XM2');
  </script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 2.4.0">
  <meta name="generator" content="Hugo 0.53" />
  <meta name="author" content="Bogdan Penkovsky">

  
  
  
  
    
  
  <meta name="description" content="We will build an autonomous robot. Captured by robot&#39;s camera, video stream will be analyzed by a neural network. The network will be running on the onboard Raspberry Pi that will steer the robot. Before you start with the project, I want you to answer two questions. First, how everything will be attached mechanically? Second, what will be the energy source? While your autonomous robot can work from a cardboard box, having a mechanically sound chassis will greatly improve the result on the AI training stage.">

  
  <link rel="alternate" hreflang="en-us" href="https://penkovsky.com/post/self-driving-robot/">

  


  

  
  
  
  <meta name="theme-color" content="#0095eb">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/abap.min.css" crossorigin="anonymous">
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  

  <link rel="stylesheet" href="/styles.css">
  

  
  
  

  
  <link rel="alternate" href="https://penkovsky.com/index.xml" type="application/rss+xml" title="Bogdan Penkovsky, PhD">
  <link rel="feed" href="https://penkovsky.com/index.xml" type="application/rss+xml" title="Bogdan Penkovsky, PhD">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://penkovsky.com/post/self-driving-robot/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Bogdan Penkovsky, PhD">
  <meta property="og:url" content="https://penkovsky.com/post/self-driving-robot/">
  <meta property="og:title" content="Making Your Self-Driving Robot | Bogdan Penkovsky, PhD">
  <meta property="og:description" content="We will build an autonomous robot. Captured by robot&#39;s camera, video stream will be analyzed by a neural network. The network will be running on the onboard Raspberry Pi that will steer the robot. Before you start with the project, I want you to answer two questions. First, how everything will be attached mechanically? Second, what will be the energy source? While your autonomous robot can work from a cardboard box, having a mechanically sound chassis will greatly improve the result on the AI training stage."><meta property="og:image" content="https://penkovsky.com/img/raspi/selfdriving.jpg">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2020-11-15T23:00:00&#43;02:00">
  
  <meta property="article:modified_time" content="2020-11-15T23:00:00&#43;02:00">
  

  

  

  <title>Making Your Self-Driving Robot | Bogdan Penkovsky, PhD</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Bogdan Penkovsky, PhD</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        

        <li class="nav-item">
          <a href="/">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/post">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/neural-networks">
            
            <span>Neural Networks</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#teaching">
            
            <span>Teaching</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
            
          
        

        <li class="nav-item">
          <a href="https://scholar.google.co.uk/citations?user=NrD1h9QAAAAJ" target="_blank" rel="noopener">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  
<div class="article-header">
  
  
    <img src="/img/raspi/selfdriving.jpg" class="article-banner" itemprop="image">
  

  
</div>



  <div class="article-container">
    <h1 itemprop="name">Making Your Self-Driving Robot</h1>

    

<div class="article-metadata">

  
  
  
  <div>
    
    <span itemscope itemprop="author" itemtype="http://schema.org/Person">
      <span itemprop="name">Bogdan Penkovsky</span>
    </span>
    
  </div>
  

  <span class="article-date">
    
    <meta content="2020-11-15 23:00:00 &#43;0200 &#43;0200" itemprop="datePublished">
    <time datetime="2020-11-15 23:00:00 &#43;0200 &#43;0200" itemprop="dateModified">
      Nov 15, 2020
    </time>
  </span>
  <span itemscope itemprop="publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Bogdan Penkovsky">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    8 min read
  </span>
  

  
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="https://penkovsky.com/categories/raspberry-pi/">Raspberry Pi</a>, 
    
    <a href="https://penkovsky.com/categories/homelab/">Homelab</a>
    
  </span>
  
  

  
  

  

</div>


    <div class="article-style" itemprop="articleBody">
      

<p>We will build an autonomous robot. Captured by robot's camera,
video stream will be analyzed by a neural network. The network will be running
on the onboard Raspberry Pi that will steer the robot.  Before you start with
the project, I want you to answer two questions.  First, how
everything will be attached mechanically?  Second, what will be the energy
source?  While your autonomous robot can work from a cardboard box, having a
mechanically sound chassis will greatly improve the result on the AI training
stage. And the question of the energy source is essential for any autonomous
robot. Ready to answer? Then let's go!</p>

<h2 id="parts-and-tools">Parts And Tools</h2>

<p>For this project I used:</p>

<ul>
<li>Raspberry Pi 3B, 1 GB RAM (priceless ðŸ˜‰)</li>
<li>Power bank (for mobile phone)</li>
<li>USB to micro-USB cable</li>
<li>SD memory card class 10, at least 16 GB, $11.99</li>
<li><a href="https://www.amazon.com/gp/product/B07DNYQ3PX">Chassis + 2 DC motors</a> $13.99</li>
<li><a href="https://www.amazon.com/gp/product/B07QKCGX1Z">Raspberry Pi camera</a> $17.21</li>
<li><a href="https://www.amazon.com/gp/product/B014KMHSW6">L298N dual H-bridge controller</a> $6.89</li>
<li>9 V battery (local store)</li>
<li>Jumper wires</li>
<li>Something to attach the components to chassis (I used rubber bands and adhesive putty)</li>
<li>Enclosure for the electronics</li>
</ul>

<p>Tools:</p>

<ul>
<li><a href="https://www.amazon.fr/gp/product/B07N2QZPJP">Soldering iron</a> $20.07</li>
<li>A laptop with WiFi and SSH client (for robot training)</li>
<li>Multimeter (I didn't have one at hand, but it would have been useful)</li>
<li>Small screw driver</li>
<li>Wire strippers (optional)</li>
<li>Breadboard (optional)</li>
</ul>

<p>Note that the prices may vary and they are here for indicative budget only.
You can also order similar parts on AliExpress or other sites.
The bottom line is that you can easily build a self-driving robot under $100.</p>

<p>I decided to power the Raspberry Pi board and motors separately so that the
board will be reliably powered, even when the motors battery exhausts itself.
The power bank for that purpose (originally, for a mobile phone) and a USB
cable I already had at home, so they didn't count towards the budget.</p>

<p>I recommend at least 16 GB SD memory card so that you can install the Raspberry
Pi OS and have some storage space for training data acquisition (images from
the camera). Regarding camera itself, usually it is recommended to use a
wide-angle camera. However, feel free to use any camera you have (as I did).</p>

<p>The H-bridge circuit is useful to allow DC motors to run forwards or backwards.
Unlike some tutorials, mine H-bridge required between 7 V and 35 V driving
voltage. To see if the circuit is working, check if the red LED is on.  With 6
V driving voltage, it was still off. Therefore, I used a 9 V battery to power
the motors.  Finally, using a laptop with Linux will make your life easier. But
feel free to use whatever you have.</p>

<h2 id="part-i-let-the-hack-begin">Part I: Let The Hack Begin</h2>

<h3 id="assemble-the-robot">Assemble The Robot</h3>

<h4 id="1-assemble-the-chassis">1. Assemble the chassis.</h4>

<p>Attach the wheels, the ball caster, and the motors.
Don't mind the battery holder, I didn't use it in the end.</p>

<figure>

<img src="/img/raspi/chassis.jpg" width="400" />


</figure>

<h4 id="2-solder-wires-to-the-motors">2. Solder wires to the motors.</h4>

<figure>

<img src="/img/raspi/solder-wires.jpg" width="400" />


</figure>

<h4 id="3-connect-motors-to-the-h-bridge-controller">3. Connect motors to the H-bridge controller.</h4>

<p>Here you will need a small screw driver.</p>

<figure>

<img src="/img/raspi/H-bridge1.jpg" width="400" />


</figure>

<h4 id="4-connect-the-motors-controller-to-the-raspberry-pi">4. Connect the motors controller to the Raspberry Pi.</h4>

<p>Here I use a breadboard in-between, but feel free to connect the jumper wires
directly. You can choose any free (non-specialized) GPIOs pins.
Please refer to the board's pinout.</p>

<figure>

<img src="/img/raspi/pinout.png" alt="Raspberry Pi pinout. Source: [pinout.xyz](https://pinout.xyz/)." width="500" />



<figcaption data-pre="Figure " data-post=":" >
  <h4></h4>
  <p>
    Raspberry Pi pinout. Source: <a href="https://pinout.xyz/">pinout.xyz</a>.
    
    
    
  </p> 
</figcaption>

</figure>

<p>For instance, I have chosen pins <code>15</code>, <code>11</code>, <code>13</code>, and <code>31</code>. Note those
are Raspberry Pi pins, not GPIO numbers.  For example, the above pins
correspond to GPIO 22, GPIO 17, GPIO 27, and GPIO 6.  Remember those magic
numbers.</p>

<blockquote>
<p>Please do not confuse pins and GPIO numbers.
The <code>gpiozero</code> Python module refers to GPIO numbers,
whereas the software that we will use later requires Raspberry Pi pins.</p>
</blockquote>

<p>To determine the order in which you connect the jumper wires to the controller
you may want to check the controller's data sheet. Or determine the pins
experimentally, testing the digital inputs in isolation. There are four
wires: two controlling the left wheel (<code>IN1</code> and <code>IN2</code>) and
two for the right wheel control (<code>IN3</code> and <code>IN4</code>).
For example, when both <code>IN1</code> and <code>IN3</code> digital signals are high,
the robot will move forward.</p>

<p>Note that you will have to connect the ground (GND) of the controller board and
the ground of Raspberry.  Otherwise, your controller may not be able to
interpret the digital signal it receives from the Raspberry.</p>

<figure>

<img src="/img/raspi/H-bridge2.jpg" width="400" />


</figure>

<h4 id="5-power-up-the-motors-controller-with-a-9-v-battery">5. Power up the motors controller with a 9 V battery.</h4>

<p>I didn't have a battery connector at hand, so I used a chewing gum to
attach the wires to the battery.</p>

<figure>

<img src="/img/raspi/H-bridge3.jpg" width="400" />


</figure>

<h4 id="6-power-up-the-raspberry-pi">6. Power up the Raspberry Pi.</h4>

<p>Finally, power up the Raspberry Pi with a power bank using a small USB cable.</p>

<blockquote>
<p>You may want to assemble the modules neatly so that the robot is actually
autonomous. Make sure that the hardware is fixed well and will not move
during the ride.</p>
</blockquote>

<figure>

<img src="/img/raspi/proto.jpg" width="400" />


</figure>

<h3 id="sanity-check">Sanity Check</h3>

<p>Let us test what robot we have built so far! First, we connect to the
Raspberry Pi. This is done via SSH.
<a href="https://gist.github.com/masterdezign/5370fdfb113e84d39314f71281d3d7cb">Setup Raspberry Pi WiFi connection</a>
and <a href="/post/raspi-ssh-over-wifi/">connect to your board</a>.
Now, we can play with the robot interactively.
Being connected to the Raspberry Pi via SSH, type
<code>python</code> to open up the Python interpreter.
Then define your robot object</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> gpiozero <span style="color:#f92672">import</span> Robot
robot <span style="color:#f92672">=</span> Robot(left <span style="color:#f92672">=</span> (<span style="color:#ae81ff">22</span>, <span style="color:#ae81ff">17</span>), right <span style="color:#f92672">=</span> (<span style="color:#ae81ff">27</span>, <span style="color:#ae81ff">6</span>))</code></pre></div>

<p>Note the GPIO numbers we have discussed before.
Those are your connections to the bridge controller.
To make the robot do something</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">robot<span style="color:#f92672">.</span>left(<span style="color:#ae81ff">0.4</span>)</code></pre></div>

<p>Here <code>0.4</code> is the speed with which to rotate the left wheel.</p>

<figure>

<img src="/img/raspi/test1.gif" width="300" />


</figure>

<p>To stop the robot, issue</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">robot<span style="color:#f92672">.</span>stop()</code></pre></div>

<p>Type <code>exit()</code> (or press Ctrl-D) to exit the Python's interpreter's shell.  In
your favourite text editor you can create a sequence of actions to pre-program
your robot.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> gpiozero <span style="color:#f92672">import</span> Robot
<span style="color:#f92672">from</span> time <span style="color:#f92672">import</span> sleep
robot <span style="color:#f92672">=</span> Robot(left <span style="color:#f92672">=</span> (<span style="color:#ae81ff">22</span>, <span style="color:#ae81ff">17</span>), right <span style="color:#f92672">=</span> (<span style="color:#ae81ff">27</span>, <span style="color:#ae81ff">6</span>))

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Left&#34;</span>)
robot<span style="color:#f92672">.</span>left(<span style="color:#ae81ff">0.4</span>)
sleep(<span style="color:#ae81ff">1</span>)
robot<span style="color:#f92672">.</span>stop()

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Right&#34;</span>)
robot<span style="color:#f92672">.</span>right(<span style="color:#ae81ff">0.4</span>)
sleep(<span style="color:#ae81ff">1</span>)
robot<span style="color:#f92672">.</span>stop()

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Forward&#34;</span>)
robot<span style="color:#f92672">.</span>forward(<span style="color:#ae81ff">0.4</span>)
sleep(<span style="color:#ae81ff">3</span>)
robot<span style="color:#f92672">.</span>stop()</code></pre></div>

<p>Here we ask the robot to rotate left for a second,
then rotate right for a second, and finally, move
forward for three seconds.
Save it to a file on your Raspberry Pi, e.g. <code>robo.py</code>,
and execute</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">python robo.py</code></pre></div>

<p>If we have missed something, here is an official Raspberry Pi
<a href="https://projects.raspberrypi.org/en/projects/build-a-buggy/1">tutorial</a> to assist with assembling your robot.
Before you continue, now is a good time to
<a href="https://www.dexterindustries.com/howto/installing-the-raspberry-pi-camera/">attach the camera</a>.</p>

<h2 id="part-ii-remote-control">Part II: Remote Control</h2>

<p>Now that the robot is based on the Raspberry Pi,
we can do amazing things with it.
For example, we can benefit from the
<a href="https://github.com/autorope/donkeycar">DonkeyCar</a>,
an open source platform to build a small scale self driving car.
You will have to <a href="http://docs.donkeycar.com/guide/install_software/">follow the instructions</a>
to install the necessary software on your Raspberry Pi.</p>

<p>As soon as you finish with installation,
<a href="http://docs.donkeycar.com/guide/create_application/">create your Donkeycar App</a>. Connect to your Pi with SSH and type</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">donkey createcar --path ~/mycar</code></pre></div>

<p>Then check the newly created project in <code>~/mycar</code>. Thankfully, Donkey
supports our two-wheel robot almost out of the box. The remaining bits are to
edit <code>config.py</code>. Set</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">DRIVE_TRAIN_TYPE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;DC_TWO_WHEEL&#34;</span></code></pre></div>

<p>This will select the appropriate motor's driver.
Finally, set the pins as discussed before:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">HBRIDGE_PIN_LEFT_FWD <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>
HBRIDGE_PIN_LEFT_BWD <span style="color:#f92672">=</span> <span style="color:#ae81ff">11</span>
HBRIDGE_PIN_RIGHT_FWD <span style="color:#f92672">=</span> <span style="color:#ae81ff">13</span>
HBRIDGE_PIN_RIGHT_BWD <span style="color:#f92672">=</span> <span style="color:#ae81ff">31</span></code></pre></div>

<p>Now, test if everything was successful.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cd ~/mycar
python manage.py drive</code></pre></div>

<p>In under a minute, the Donkey server should be up
and running. As a result, you will be able
to access a control web interface
using <code>http://&lt;your car's IP&gt;:8887</code>.
This will allow you to remotely control the car
and capture the video stream with its camera.
Like in this video.</p>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="//www.youtube-nocookie.com/embed/oz7arGJ-uvM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>


<h2 id="part-iii-making-it-self-driving">Part III: Making It Self-Driving</h2>

<p>Being able to control your car remotely is useful
to collect the training data for the neural network.
But first we may want to set up a driving track like this.</p>

<figure>

<img src="/img/raspi/training.jpg" width="400" />


</figure>

<p>Now, drive several laps on your track. The captured image data are automatically
stored in <code>~/mycar/data</code>.
Having collected a sufficient amount of data
we pass to the driving model (neural network) training.
Here is how the world looks like from the car's viewpoint.</p>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="//www.youtube-nocookie.com/embed/1L9VchNi3B0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>


<p>Green vector illustrates human-driver commands
and the blue one is the model after training.</p>

<p>You want to revisit <code>~/mycar/config.py</code> to set the neural network parameters,
e.g. <code>LEARNING_RATE</code> and <code>BATCH_SIZE</code>.
The key training command is</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">python manage.py train --type linear --model models/mypilot.h5</code></pre></div>

<p>You can experiment with any of the driving models:
<code>linear</code>, <code>categorical</code>, <code>rnn</code>, <code>imu</code>, <code>behavior</code>, etc.
More housekeeping details can be found in
<a href="https://colab.research.google.com/drive/1lkQUvJ2Quu0m_LNLJvSicl9zDgCf4Qu6?usp=sharing">this notebook</a> adapted for TensorFlow 2.
The original version can be found
<a href="http://github.com/robocarstore/donkey-car-training-on-google-colab/blob/master/Donkey_Car_Training_using_Google_Colab.ipynb">here</a>.</p>

<p><em>Et voilÃ </em>, your self-driving car is ready!</p>

<hr style="width:50%">

<p><p>
Now, run the auto-pilot</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">screen
cd ~/mycar
python manage.py drive --model models/mypilot.h5</code></pre></div>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="//www.youtube-nocookie.com/embed/k36-46wPwvA" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>


<h2 id="what-could-be-done-better">What Could Be Done Better</h2>

<ol>
<li><p>The mechanical part could be better. After I have mounted the
acrylic chasssis, I have realized that the motors do not hold firmly.
Moreover, there was a friction between one of the wheels and chassis.
Therefore, I had to programmatically adjust the power
to balance the wheels.</p></li>

<li><p>Moreover, I believe that having a streering wheel motor
would be much more efficient, instead of
<a href="https://www.societyofrobots.com/programming_differentialdrive.shtml">differential drive</a>, as they call this construction in
the robotics community. To test in the future.</p></li>

<li><p>Likewise, it is important to keep your camera in the same position during
training and during self-piloting. Also make sure that the battery is
always charged.</p></li>

<li><p>It would be nice to have a 9 V battery connector, instead of a piece of
putty. As simple as that.</p></li>

<li><p>Quality of the training data. The better is your driving strategy, the
better training data you will produce, the better the car will learn its
turns.</p></li>

<li><p>Transfer learning. You can pretrain your driving model in a virtual
environment such as
<a href="https://github.com/tawnkramer/gym-donkeycar">Donkey Gym</a>.
See also this
<a href="https://www.youtube.com/watch?v=J6Ll5Obtuxk&amp;feature=youtu.be">video</a>.</p></li>
</ol>

<hr />

<figure>

<img src="/img/raspi/robo.jpg" alt="A robot from 70s I have seen at MusÃ©e des Arts et MÃ©tiers in Paris. The robot inspired me for this project." width="590" />



<figcaption data-pre="Figure " data-post=":" >
  <h4></h4>
  <p>
    A robot from 70s I have seen at MusÃ©e des Arts et MÃ©tiers in Paris. The robot inspired me for this project.
    
    
    
  </p> 
</figcaption>

</figure>

<p>I would like to thank the folks from the Integnano group who
gave me a Raspberry Pi as a birthday gift.
You are amazing!</p>

<hr />

<p>As always, if you have any questions, remarks, or spotted any typos please send me
a message.</p>

<h2 id="learn-more">Learn More</h2>

<ul>
<li><a href="https://projects.raspberrypi.org/en/projects/build-a-buggy/1">Build a robot buggy tutorial</a></li>
<li><a href="https://www.societyofrobots.com/programming_differentialdrive.shtml">Differential drive</a></li>
<li><a href="https://donkeycar.com">Donkey Car platform</a></li>
<li><a href="https://github.com/smellslikeml/LitterBug_donkey/wiki">LitterBug donkey</a></li>
<li><a href="https://www.youtube.com/watch?v=4fXbDf_QWM4&amp;feature=emb_logo">Driving Tips to Train your Autonomous End-to-End NN Driver</a></li>
</ul>

    </div>

    


<div class="article-tags">
  
  <a class="label label-default" href="https://penkovsky.com/tags/diy/">DIY</a>
  
  <a class="label label-default" href="https://penkovsky.com/tags/raspi/">Raspi</a>
  
  <a class="label label-default" href="https://penkovsky.com/tags/deep-learning/">Deep Learning</a>
  
</div>




    
    <div class="article-widget">
      Next: <a href="https://penkovsky.com/post/beatle/">3D Printing Tutorial: Designing a Micro Drone Frame</a>
    </div>
    

    
    
    <div class="article-widget">
      <div class="hr-light"></div>
      <h3>Related</h3>
      <ul>
        
        <li><a href="/post/raspi-ssh-over-wifi/">Connecting To Raspberry Pi Over WiFi</a></li>
        
        <li><a href="/publication/medical-bnn/">In-Memory Resistive RAM Implementation of Binarized Neural Networks for Medical Applications</a></li>
        
        <li><a href="/neural-networks/day6/">Day 6: Saving Energy with Binarized Neural Networks</a></li>
        
        <li><a href="/publication/digital-biologically-plausible-binarized-neural-networks/">Digital Biologically Plausible Implementation of Binarized Neural Networks with Differential Hafnium Oxide Resistive Memory Arrays</a></li>
        
        <li><a href="/neural-networks/day5/">Day 5: Convolutional Neural Networks Tutorial</a></li>
        
      </ul>
    </div>
    

    


  </div>
</article>

<footer class="site-footer">
  <div class="container">

    

    <p class="powered-by">

      &copy; Bogdan Penkovsky 2025 &middot; 

      Powered by
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>
        
      

      
      
    

    <script src="/js/hugo-academic.js"></script>
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    

    
    

    
    

  </body>
</html>

